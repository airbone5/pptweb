<!DOCTYPE html>
<html><head>
  <title>t1 google_api</title>  
      
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href='../../images/favicon.ico'/>
      
    <script src="../../js/jquery-3.3.1.min.js?1629553068"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <script src='../../js/tocbot.min.js'></script>
    <link href='../../css/tocbot.css' rel="stylesheet">

    <script src='../../js/datatables.min.js'></script>    
    <link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet">    
    
    <link href="../../css/fontawesome-all.min.css?1629553068" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1629553068" rel="stylesheet">
    <link href="../../css/syntax.css?1629553068" rel="stylesheet">
    
    <link href="../../css/theme-mine.css?1629553068" rel="stylesheet">
    
    <link href="../../css/theme.css?1629553068" rel="stylesheet">
    
    
    <link rel="stylesheet" href="../../scss/notice.e59a0cc88b64e695994f518354819cfbf48558cdcfd9a16dc129f9952128ba36.css" integrity="sha256-5ZoMyItk5pWZT1GDVIGc&#43;/SFWM3P2aFtwSn5lSEoujY=">

    
  </head><body><div id="top-pane" class="navbar  fixed-top ">
  <div class="container-fluid">
  <span >
    <a  href='../../' class="fs-5 accessory"><i class="fas fa-home"></i>我的測試區</a>
    <span id="sidebar-toggle-span" class="fs-5"><i class="fas fa-align-justify"></i></span>
  </span><span >
      <span id="toc-menu">
    <label><i class="fas fa-list-alt" ></i> </label>    
<div id="variant-toc-content" >
    <div class="wrapper">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#背景">背景</a></li>
<li><a href="#google-oath2">google OATH2</a></li>
<li><a href="#github-oath2">Github OATH2</a></li>
<li><a href="#javascript-範例">javascript 範例</a>
<ul>
<li><a href="#ex-2">ex 2</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
    <hr class="p-0 m-0" />
    <div class="toa"></div>
</div>
</span>
<span class="fs-5 accessory" data-bs-toggle="tooltip" data-bs-placement="bottom" 
      title='最後修改August 21, 2021'>t1 google_api</span>
        
    

    </span>
  
  <span></span><span >
    <span >
    <label for="search-query" id="search-button"><i class="fas fa-search"></i></label>
    <input id="search-query" type="search" placeholder="搜尋" autocomplete="off">
</span>    
 
<div id="search-pane">
 <ol id="search-results"></ul>
</div>

    </span>
</div> 
</div>


<div id="content-wrapper"><nav id="sidebar">

  

    
    
    <ul class="nav flex-column topics" id="home-topics">
      
        
          
        
          
          

 


<li class="nav-item" data-bs-toggle="tooltip" title="nodejs 測試">
     

  <a class="nav-link" 
    href="../../nodejs.html"><i class="far fa-folder"></i>nodejs 測試  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_af4b61d775dd1b084c1edc9440ed8bb8"><i class="fas fa-caret-right"></i></span>
      
  <ul id="menu_item_af4b61d775dd1b084c1edc9440ed8bb8"  
  class="submenu collapse" 
  data-bs-parent="#home-topics"> 
    

  
  
  
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../nodejs/tutorial/t1_basic.html" data-bs-toggle="tooltip" title="t1 basic">t1 basic</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../nodejs/tutorial/t2_cors.html" data-bs-toggle="tooltip" title="t2 cors 的實驗">t2 cors 的實驗</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../nodejs/tutorial/t3_cookies.html" data-bs-toggle="tooltip" title="t3_cookies">t3_cookies</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../nodejs/tutorial/t4_session.html" data-bs-toggle="tooltip" title="t4_session">t4_session</a></li>
    </ul>
  

</li>   
     
  

        
          
        
          
        
          
          

 


<li class="nav-item" data-bs-toggle="tooltip" title="基本">
     

  <a class="nav-link" 
    href="../../basic.html"><i class="far fa-folder"></i>基本  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_e1c118151bd2cc204dc463b4dbcd4102"><i class="fas fa-caret-right"></i></span>
      
  <ul id="menu_item_e1c118151bd2cc204dc463b4dbcd4102"  
  class="submenu collapse show" 
  data-bs-parent="#home-topics"> 
    

  
  
  
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/vscode.html" data-bs-toggle="tooltip" title="vscode 的設定">vscode 的設定</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/vscode%E5%BF%AB%E9%80%9F.html" data-bs-toggle="tooltip" title="vscode快速">vscode快速</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E4%BD%BF%E7%94%A8slice.html" data-bs-toggle="tooltip" title="使用slice">使用slice</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E5%85%A7%E5%BB%BA%E6%8C%87%E4%BB%A4relref%E6%B8%AC%E8%A9%A6.html" data-bs-toggle="tooltip" title="內建指令relref測試.md">內建指令relref測試.md</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E6%89%93%E5%85%89.html" data-bs-toggle="tooltip" title="打光議題">打光議題</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E6%89%93%E5%8C%85%E6%96%87%E4%BB%B6.html" data-bs-toggle="tooltip" title="打包文件">打包文件</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E6%9C%89%E9%97%9Cthemes%E8%A8%AD%E5%AE%9A.html" data-bs-toggle="tooltip" title="有關variant 的config.toml">有關variant 的config.toml</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/tagtest.html" data-bs-toggle="tooltip" title="標籤">標籤</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E9%81%94%E5%BC%8F.html" data-bs-toggle="tooltip" title="正規表達式">正規表達式</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/gallery.html" data-bs-toggle="tooltip" title="短碼 - foldergallery">短碼 - foldergallery</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E7%9F%AD%E7%A2%BCexpand.html" data-bs-toggle="tooltip" title="短碼 expand">短碼 expand</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E7%9F%AD%E7%A2%BCattachfiles.html" data-bs-toggle="tooltip" title="短碼attachfiles">短碼attachfiles</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/short_demo_container_md.html" data-bs-toggle="tooltip" title="短碼demo_container_md">短碼demo_container_md</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E7%9F%AD%E7%A2%BCdocfile%E8%A8%BB%E8%A7%A3.html" data-bs-toggle="tooltip" title="短碼docfile註解.md">短碼docfile註解.md</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E7%9F%AD%E7%A2%BCgithub.html" data-bs-toggle="tooltip" title="短碼github.html">短碼github.html</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E7%B7%A8%E8%99%9F.html" data-bs-toggle="tooltip" title="編號">編號</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/short_editurl.html" data-bs-toggle="tooltip" title="編輯副檔名">編輯副檔名</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E8%A8%8E%E8%AB%96%E5%8D%80.html" data-bs-toggle="tooltip" title="討論區">討論區</a></li>
    
  <li>

 


<li class="nav-item" data-bs-toggle="tooltip" title="token 測試">
     

  <a class="nav-link" 
    href="../../basic/token.html"><i class="far fa-folder"></i>token 測試  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_59852a0c5987b8e2611de46cc1c512a6"><i class="fas fa-caret-right"></i></span>
      
  <ul id="menu_item_59852a0c5987b8e2611de46cc1c512a6"  
  class="submenu collapse show" 
  data-bs-parent="#menu_item_e1c118151bd2cc204dc463b4dbcd4102"> 
    

  
  
  
  
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/token/token%E5%AF%A6%E9%A9%97.html" data-bs-toggle="tooltip" title="t2 token實驗">t2 token實驗</a></li>
    
  
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/token/test.html" data-bs-toggle="tooltip" title="test">test</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/token/%E6%8B%BFtoken.html" data-bs-toggle="tooltip" title="拿token">拿token</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/token/reuri.html" data-bs-toggle="tooltip" title="重導用的URI">重導用的URI</a></li>
    </ul>
  

</li>   
     
  
</li>
    
  <li>

 


<li class="nav-item" data-bs-toggle="tooltip" title="記錄不同config發生的問題">
     

  <a class="nav-link" 
    href="../../basic/%E4%BD%BF%E7%94%A8%E6%99%82%E7%99%BC%E7%94%9F%E7%9A%84%E5%95%8F%E9%A1%8C.html"><i class="far fa-folder"></i>記錄不同config發生的問題  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_a2e7f9311576d18267924c12ad26059e"><i class="fas fa-caret-right"></i></span>
      
  <ul id="menu_item_a2e7f9311576d18267924c12ad26059e"  
  class="submenu collapse" 
  data-bs-parent="#menu_item_e1c118151bd2cc204dc463b4dbcd4102"> 
    

  
  
  
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E4%BD%BF%E7%94%A8%E6%99%82%E7%99%BC%E7%94%9F%E7%9A%84%E5%95%8F%E9%A1%8C/cssstyle2.html" data-bs-toggle="tooltip" title="樣式 in Rmarkdown">樣式 in Rmarkdown</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../basic/%E4%BD%BF%E7%94%A8%E6%99%82%E7%99%BC%E7%94%9F%E7%9A%84%E5%95%8F%E9%A1%8C/cssstyle.html" data-bs-toggle="tooltip" title="樣式 in Rmd">樣式 in Rmd</a></li>
    </ul>
  

</li>   
     
  
</li>
    </ul>
  

</li>   
     
  

        
          
        
          
          

 


<li class="nav-item" data-bs-toggle="tooltip" title="有關R的測試">
     

  <a class="nav-link" 
    href="../../r.html"><i class="far fa-folder"></i>有關R的測試  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_f2fbe31bf91947f86781e8f880800fb7"><i class="fas fa-caret-right"></i></span>
      
  <ul id="menu_item_f2fbe31bf91947f86781e8f880800fb7"  
  class="submenu collapse" 
  data-bs-parent="#home-topics"> 
    

  
  
  
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E5%BC%95%E6%93%8E%E6%B8%AC%E8%A9%A6%E6%BA%96%E5%82%99%E5%B7%A5%E4%BD%9C.html" data-bs-toggle="tooltip" title="0. 引擎測試準備工作">0. 引擎測試準備工作</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E5%BC%95%E6%93%8E%E6%B8%AC%E8%A9%A61.html" data-bs-toggle="tooltip" title="1. 引擎測試1">1. 引擎測試1</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E5%BC%95%E6%93%8E%E6%B8%AC%E8%A9%A62.html" data-bs-toggle="tooltip" title="2. 引擎測試2">2. 引擎測試2</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E5%BC%95%E6%93%8E%E6%B8%AC%E8%A9%A63.html" data-bs-toggle="tooltip" title="3. 引擎測試3">3. 引擎測試3</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E5%BC%95%E6%93%8E%E6%B8%AC%E8%A9%A64.html" data-bs-toggle="tooltip" title="4. 引擎測試4">4. 引擎測試4</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/blackfriday.html" data-bs-toggle="tooltip" title="blackfriday">blackfriday</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/chunk_output.html" data-bs-toggle="tooltip" title="chunk output in Rmarkdown">chunk output in Rmarkdown</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/global_options.html" data-bs-toggle="tooltip" title="global option in R">global option in R</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E4%BA%82%E6%95%B8.html" data-bs-toggle="tooltip" title="亂數">亂數</a></li>
    
  
        <li class="nav-item">
          
          <a class="nav-link" href="../../r/%E6%B8%AC%E8%A9%A6%E9%A1%9E%E5%88%A5.html" data-bs-toggle="tooltip" title="測試類別">測試類別</a></li>
    </ul>
  

</li>   
     
  

          
        
  </ul> 

    
    
    <hr/>
    <section id="shortcuts">
      <ul>Shortcuts</ul>
      <ul>
        
        <li>
          ⛳<a href="../../categories.html"><i class='fas fa-fw fa-paperclip'></i> 分類</a>
        </li>
        
      </ul>
    </section>
    

    <hr/>
    <section id="footer">
      最近3篇<br/><ul><li><a href="../../basic/token/token%E5%AF%A6%E9%A9%97.html"> <i class="far fa-clock" ></i>t2 token實驗[2021-08-21 PM 06:06]</a></li><li><a href="../../basic/token/test.html"> <i class="far fa-clock" ></i>test[2021-08-21 PM 02:31]</a></li><li><a href="../../basic/token/%E6%8B%BFtoken.html"> <i class="far fa-clock" ></i>拿token[2021-08-21 PM 12:25]</a></li></ul>
    </section>
  
</nav><article class="article mx-2 mt-3" id="body-inner">
    <h2 id="背景">背景</h2>

<p>OAuth2 機制的三方:</p>

<ul>
<li>登入者The client - The person, or user who is trying to log in</li>
<li>開發人員,網站提供者: The consumer - The application that the client wants to log into (which is Gitlab in this example)</li>
<li>驗證方: The service provider - The external application that authenticates the users identity. (which is Github in this example)</li>
</ul>

<p>其他參考</p>

<ul>
<li><a href="https://www.kirupa.com/html5/making_http_requests_js.htm">怎樣利用javascript 達成http request</a></li>
</ul>

<p>主要參考</p>

<ul>
<li><a href="https://blog.tericcabrel.com/upload-file-to-google-drive-with-nodejs/">生手: nodejs + google api</a>

<ul>
<li>client id, client secret</li>
</ul></li>
<li><a href="https://www.kirupa.com/html5/making_http_requests_js.htm">收發get,post</a></li>

<li><p><a href="https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/%E7%AD%86%E8%A8%98-%E8%AA%8D%E8%AD%98-oauth-2-0-%E4%B8%80%E6%AC%A1%E4%BA%86%E8%A7%A3%E5%90%84%E8%A7%92%E8%89%B2-%E5%90%84%E9%A1%9E%E5%9E%8B%E6%B5%81%E7%A8%8B%E7%9A%84%E5%B7%AE%E7%95%B0-c42da83a6015">✔參考</a></p>

<h2 id="google-oath2">google OATH2</h2></li>
</ul>


  <figure  class="figure text-center d-block border border-primary w-75">







    <img src="google_api.files/google-oath-2.png.png" class="figure-img"
         alt="圖" width="100%"/> <figcaption class="figure-caption">
            圖
        </figcaption>

</figure>



  <figure  class="figure text-center d-block border border-primary w-75">







    <img src="google_api.files/oath%e9%80%b2%e5%85%a5%e6%b5%81%e7%a8%8b.png" class="figure-img"
         alt="google api oath 流程" width="100%"/> <figcaption class="figure-caption">
            google api oath 流程
        </figcaption>

</figure>


<ul>
<li><p><a href="https://developers.google.com/oauthplayground/">google oath playaround授權 測試</a></p>

<ul>
<li>實作 1

  <figure  class="figure text-center d-block  border border-primary w-75">







    <img src="google_api.files/%e6%ad%a5%e9%a9%9f1.png" class="figure-img"
         alt="拿到授權碼" width="100%"/> <figcaption class="figure-caption">
            拿到授權碼
        </figcaption>

</figure>
</li>

<li><p>填完上圖中畫圈地方,然後點擊上圖中綠色箭頭(就是最上面那個圖的步驟1),出現user login consent,然後出現下圖
<div class="expand">
    <div class="expand-label" onclick="$h = $(this);$h.siblings('div.expand-content').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.siblings('div.expand-content').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fa fa-chevron-right" color="yellow"></i>
        <span>下圖右邊欄位的文字,注意看一下,沒有client secret,只有client ID</span>
    </div><div class="expand-content"><pre><code class="language-html">Request / Response
HTTP/1.1 302 Found
Location: https://accounts.google.com/o/oauth2/v2/auth?redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground&amp;prompt=consent&amp;response_type=code&amp;client_id=407408718192.apps.googleusercontent.com&amp;scope=&amp;access_type=offline
GET /oauthplayground/?code=4/0AX4XfWgL65hiZmu1jbjdTaQYBLiIDRK7Sy62dk5zUsHwNQsR_hhRLwaw-ziI3drEEwku-w&amp;scope=https://www.googleapis.com/auth/drive HTTP/1.1
Host: developers.google.com
</code></pre>
</div></div><br />

  <figure  class="figure text-center d-block border border-primary w-75">







    <img src="google_api.files/%e6%ad%a5%e9%a9%9f2.jpg" class="figure-img"
         alt="拿到授權碼" width="100%"/> <figcaption class="figure-caption">
            拿到授權碼
        </figcaption>

</figure>
</p></li>

<li><p>上圖得到授權碼(步驟4)，再點擊上圖綠色箭頭(執行步驟5),接續下圖

  <figure  class="figure text-center d-block border border-primary w-75">







    <img src="google_api.files/%e6%ad%a5%e9%a9%9f3.png" class="figure-img"
         alt="拿到access token" width="100%"/> <figcaption class="figure-caption">
            拿到access token
        </figcaption>

</figure>

<div class="expand">
    <div class="expand-label" onclick="$h = $(this);$h.siblings('div.expand-content').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.siblings('div.expand-content').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fa fa-chevron-right" color="yellow"></i>
        <span>右上的文字</span>
    </div><div class="expand-content"><pre><code class="language-html">
Request / Response
POST /token HTTP/1.1
Host: oauth2.googleapis.com
Content-length: 306
content-type: application/x-www-form-urlencoded
user-agent: google-oauth-playground
code=4%2F0AX4XfWiLzx-Q9gerb6RQnyj_FFpD4s1MW215rctgc2f_6K6BDEaUjyRdufx2QRs5aiJCEw&redirect_uri=https%3A%2F%2Fdevelopers.google.com%2Foauthplayground&client_id=481947092768-jjc4m20mttpugspp5bsbtl7ejsv1aa08.apps.googleusercontent.com&client_secret=oY_NUeJC2J1a61M8TL2te9mH&scope=&grant_type=authorization_code
HTTP/1.1 200 OK
Content-length: 413
X-xss-protection: 0
X-content-type-options: nosniff
Transfer-encoding: chunked
Expires: Mon, 01 Jan 1990 00:00:00 GMT
Vary: Origin, X-Origin, Referer
Server: scaffolding on HTTPServer2
-content-encoding: gzip
Pragma: no-cache
Cache-control: no-cache, no-store, max-age=0, must-revalidate
Date: Thu, 19 Aug 2021 04:54:33 GMT
X-frame-options: SAMEORIGIN
Alt-svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-T051=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"
Content-type: application/json; charset=utf-8
{
  <span class="tooltip nopre">🏷<span class="tooltiptext" style="background: rgb(255 255 255 / 37%); margin: 0;   padding: 0;border:solid orange;">這是我們要拿到的  
    </span>
  </span>"access_token": "ya29. a0ARrdaM_BiN-tlVQMK4oLMpQln4yO1CJv36yYyRtmkJ8i1vne647hs0QfhSHVP0gPpv4NcE50Rq1FqI_er5XGwFGLWv9yg7l1dLmw1PuoKHeBl6xS7zB4K_EcQBjKE7xYD6j6HTlmnhcOmIf0W8PDtdO-U0tz", 
  "scope": "https://www.googleapis.com/auth/drive", 
  "token_type": "Bearer", 
  "expires_in": 3599, 
  "refresh_token": "1//04-7CNWXtNf-cCgYIARAAGAQSNwF-L9Ir65AoLvKSLZTqG-bZScTFJ-9Vcx72p3egmORx71-CtbScOkQjx_2y7GwoNktHA30rATY"
}
</code></pre>
</div></div></p></li>
</ul></li>
</ul>

<h2 id="github-oath2">Github OATH2</h2>

<ul>
<li><a href="https://www.sohamkamani.com/nodejs/oauth/">Implementing OAuth 2.0 with Node.js</a>

<ul>
<li><a href="https://github.com/sohamkamani/node-oauth-example">程式碼github</a>

  <figure  class="figure text-center d-block border border-primary w-75">







    <img src="google_api.files/oath3party.png.png" class="figure-img"
         alt="圖" width="100%"/> <figcaption class="figure-caption">
            圖
        </figcaption>

</figure>
</li>
</ul></li>
</ul>

<p>點了以後出現</p>

<pre><code>https://github.com/login/oauth/authorize?client_id={your_client_id}&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Foauth%2Fredirect
</code></pre>

<p>%3A = <code>:</code>
%2F = <code>/</code></p>

<p>public/index.html</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;a
      href=&quot;https://github.com/login/oauth/authorize?client_id=myclientid123&amp;redirect_uri=http://localhost:8080/oauth/redirect&quot;
    &gt;
      Login with github
    &lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<ul>
<li><code>https//github.com/login/oauth/authorize</code> Github的OATH 出入口。使用者會被送到這裡,繼續流程。</li>
<li><code>client_id=myclientid123</code>  指定應用程式的ID(client ID)。用來跟告訴Github 誰是開發人員(consumer)

<ul>
<li>(取得clientid: <a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a>)</li>
</ul></li>
<li><code>redirect_uri=http://localhost:8080/oauth/redirect</code> - specifies the URL to redirect to with the request token, once the user has been authenticated by the service provider. Normally, you will have to set this value on the registration portal as well, to prevent anyone from setting malicious callback URLs.</li>
</ul>

<h2 id="javascript-範例">javascript 範例</h2>

<pre><code class="language-js">var fileContent = 'sample text'; // As a sample, upload a text file.
var file = new Blob([fileContent], {type: 'text/plain'});
var metadata = {
    'name': 'sampleName', // Filename at Google Drive
    'mimeType': 'text/plain', // mimeType at Google Drive
    'parents': ['### folder ID ###'], // Folder ID at Google Drive
};

var accessToken = gapi.auth.getToken().access_token; // Here gapi is used for retrieving the access token.
var form = new FormData();
form.append('metadata', new Blob([JSON.stringify(metadata)], {type: 'application/json'}));
form.append('file', file);

var xhr = new XMLHttpRequest();
xhr.open('post', 'https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&amp;fields=id');
xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
xhr.responseType = 'json';
xhr.onload = () =&gt; {
    console.log(xhr.response.id); // Retrieve uploaded file ID.
};
xhr.send(form);
</code></pre>

<h3 id="ex-2">ex 2</h3>

<pre><code class="language-js">var fileContent = 'sample text'; // As a sample, upload a text file.
var file = new Blob([fileContent], {type: 'text/plain'});
var metadata = {
    'name': 'sampleName', // Filename at Google Drive
    'mimeType': 'text/plain', // mimeType at Google Drive
    'parents': ['### folder ID ###'], // Folder ID at Google Drive
};

var accessToken = gapi.auth.getToken().access_token; // Here gapi is used for retrieving the access token.
var form = new FormData();
form.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
form.append('file', file);

fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&amp;fields=id', {
    method: 'POST',
    headers: new Headers({ 'Authorization': 'Bearer ' + accessToken }),
    body: form,
}).then((res) =&gt; {
    return res.json();
}).then(function(val) {
    console.log(val);
});
</code></pre>
  </article><div class="collapse fs-6 pt-2" id="qnote-list">
    <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-white ">
        <span >
            
            <span class="fw-semibold">
                <button  class="btn btn-primary btn-inline" 
                   data-bs-toggle="collapse" data-bs-target="#qnote-edit"><span data-bs-toggle="tooltip" title="加入速記">加</span></button>
                <button id="qnote-gsave" class="btn btn-primary btn-inline" 
                   data-bs-toggle="tooltip" data-bs-placement="left" title="存到硬碟"
                   onclick="qnSaveGoogle()">存</button>
                <label for="qnote-load" class="btn btn-primary btn-inline"  data-bs-toggle="tooltip" data-bs-placement="left" title="從檔案載入">載</label>   
                <input style="display:none" type="file" id="qnote-load" onchange="qnLoadGoogle(this)" />
                <button id="qnote-clear" class="btn btn-primary btn-inline" 
                   data-bs-toggle="tooltip" data-bs-placement="left" title="清除全部速記"
                   onclick="cleanNotes()">清</button>
            </span>
        </span>
        <span class="fw-semibold collapse" id="qnote-edit"> 
            <input type="text" class="txtitle d-block w-100 h-25 " placeholder="抬頭" />
            <textarea class="txtBox  d-block w-100 h-75 " placeholder="本文"></textarea>
            
            <button id="qnote-add-item" onclick="addNote()" class="btn btn-primary">存</button> 
        </span>

    </div>
</div>

<link href="../../css/quicknote.css?1629553068" rel="stylesheet">
<script src="../../js/quicknote.js?1629553068"></script>
<div id="page-guide" class="bg-dark">  
  
    
          
          <a href="../../basic/token/byclientid.html" 
                   class="btn btn-primary" 
                   data-bs-toggle="tooltip" 
                   data-bs-placement="left" title=byclientid>前</a>
                   
          
            <a href="../../basic/token/token%E5%AF%A6%E9%A9%97.html" 
               class="btn btn-primary" data-bs-toggle="tooltip" data-bs-placement="left" 
               title=t2&#32;token實驗>後</a>            
          
          

  
<script src="../../js/packhtml.js?1629553068"></script>    
<button class="btn btn-primary " onclick="packthis(this)"
data-bs-toggle="tooltip" data-bs-placement="left" title="打包成單一檔案">包</button>
<button class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="div#qnote-list">
  <span data-bs-toggle="tooltip" data-bs-placement="left" title="快速註記">速</span></button>
 
</div>
  </div>


  <script src="../../js/featherlight.min.js?1629553068"></script>
  <script src="../../js/featherlight.gallery.min.js?1629553068"></script>
  <link href="../../css/featherlight.min.css?1629553068" rel="stylesheet">
  <link href="../../css/featherlight.gallery.min.css?1629553068" rel="stylesheet">

  <script src="../../js/highlight.pack.js?1629553068"></script>
  
  <script>
 
document.addEventListener('DOMContentLoaded', (event) => {
  document.querySelectorAll('pre:not(.chroma) code').forEach((el) => {
    hljs.highlightBlock(el);
  });
});   
 
  </script>
  <link href="../../css/demoContainer.css?1629553068" rel="stylesheet"><link href="../../css/rmd.css?1629553068" rel="stylesheet">
  <link href="../../css/mystyle.css?1629553068" rel="stylesheet">    
  <script src='../../js/variant.js?1629553068'></script>

<script>
  var idxfile = "\//index.json"
</script>
<script src='../../js/localsearch.js?1629553068'></script>
    


  

  <script>
    
      MathJax = {
        tex: {
          inlineMath: [['\($', '$\)'], ['\\(', '\\)']],
          displayMath: [['$$','$$']]  
        },
        svg: {
          fontCache: 'global'
        }
      };
    
      </script>
      <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
      </script>



<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    jumpto = document.querySelector(".active-category .active");
     if (jumpto!=null) jumpto.scrollIntoViewIfNeeded(true);
  
  });    
  
  </script>
</body>
</html>